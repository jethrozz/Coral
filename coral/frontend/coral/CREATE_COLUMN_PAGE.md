# åˆ›å»ºä¸“æ é¡µé¢åŠŸèƒ½è¯´æ˜

## ğŸ“ æ¦‚è¿°

å®Œæ•´çš„ä¸“æ åˆ›å»ºè¡¨å•é¡µé¢ï¼Œæ”¯æŒæ‰€æœ‰åˆçº¦è¦æ±‚çš„å­—æ®µï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯ã€æ›´æ–°æ–¹å¼ï¼ˆUpdateMethodï¼‰å’Œæ”¯ä»˜æ–¹å¼ï¼ˆPaymentMethodï¼‰ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### 1. åŸºæœ¬ä¿¡æ¯

#### å¿…å¡«å­—æ®µ
- **ä¸“æ åç§°** (`name`)
  - è¾“å…¥æ¡†ç±»å‹
  - ä¸“æ çš„æ ‡é¢˜

- **ä¸“æ æè¿°** (`desc`)
  - å¤šè¡Œæ–‡æœ¬æ¡†
  - 5è¡Œé«˜åº¦
  - è¯¦ç»†ä»‹ç»ä¸“æ å†…å®¹

- **å°é¢å›¾ç‰‡åœ°å€** (`cover_img_url`)
  - URL è¾“å…¥æ¡†
  - æ”¯æŒ https é“¾æ¥
  - æ¨è 16:9 æ¯”ä¾‹

- **è®¡åˆ’å‘å¸ƒæœŸæ•°** (`plan_installment_number`)
  - æ•°å­—è¾“å…¥æ¡†
  - æœ€å°å€¼ï¼š1
  - é¢„è®¡å‘å¸ƒçš„æ€»æœŸæ•°

- **æ˜¯å¦æ”¯æŒæ‰“åˆ†** (`is_rated`)
  - ä¸‹æ‹‰é€‰æ‹©ï¼šæ˜¯/å¦
  - å¸ƒå°”å€¼
  - å…è®¸ç”¨æˆ·å¯¹ä¸“æ è¯„åˆ†

### 2. æ›´æ–°æ–¹å¼ (UpdateMethod)

æ ¹æ®åˆçº¦å®šä¹‰ï¼š
```move
public struct UpdateMethod has key {
    id: UID,
    since: u64,              // å¼€å§‹æ—¶é—´
    day_number: u64,         // æ¯å¤šå°‘å¤©æ›´æ–°
    installment_number: u64, // æ¯æ¬¡æ›´æ–°å¤šå°‘æœŸ
}
```

#### å­—æ®µè¯´æ˜

**å¼€å§‹æ—¶é—´** (`update_since`)
- æ¯«ç§’æ—¶é—´æˆ³
- æ›´æ–°è®¡åˆ’çš„å¼€å§‹æ—¶é—´
- ç¤ºä¾‹ï¼š1704067200000

**æ›´æ–°é—´éš”** (`update_day_number`)
- å¤©æ•°
- æ¯éš”å¤šå°‘å¤©æ›´æ–°ä¸€æ¬¡
- ç¤ºä¾‹ï¼š7ï¼ˆæ¯å‘¨æ›´æ–°ï¼‰

**æ¯æ¬¡æ›´æ–°æœŸæ•°** (`update_installment_number`)
- æ•´æ•°
- æ¯æ¬¡æ›´æ–°å‘å¸ƒå¤šå°‘æœŸ
- ç¤ºä¾‹ï¼š1ï¼ˆæ¯æ¬¡æ›´æ–°1æœŸï¼‰

#### ç¤ºä¾‹åœºæ™¯
- æ¯å‘¨æ›´æ–°ï¼šday_number = 7, installment_number = 1
- æ¯æœˆæ›´æ–°ï¼šday_number = 30, installment_number = 1
- åŒå‘¨æ›´æ–°2æœŸï¼šday_number = 14, installment_number = 2

### 3. æ”¯ä»˜æ–¹å¼ (PaymentMethod)

æ ¹æ®åˆçº¦å®šä¹‰ï¼š
```move
public struct PaymentMethod has key {
    id: UID,
    pay_type: u8,           // 0ä¹°æ–­ï¼Œ1è´¨æŠ¼, 2è®¢é˜…
    coin_type: String,      // å¸ç§ç±»å‹
    decimals: u64,          // ç²¾åº¦
    fee: u64,               // è´¹ç”¨ï¼ˆç²¾åº¦9ä½ï¼‰
    subscription_time: u64, // è®¢é˜…æ—¶é•¿ï¼ˆå¤©ï¼‰
}
```

#### æ”¯ä»˜ç±»å‹ (`pay_type`)

**0 - ä¹°æ–­ï¼ˆBuy Outï¼‰**
- ä¸€æ¬¡æ€§ä»˜è´¹
- è·å¾—æ‰€æœ‰å†…å®¹çš„æ°¸ä¹…è®¿é—®æƒ
- é€‚åˆï¼šæœ‰æ˜ç¡®æœŸæ•°çš„ä¸“æ 

**1 - è´¨æŠ¼ï¼ˆStakeï¼‰**
- è´¨æŠ¼ä»£å¸
- åˆ°æœŸåå¯èµå›
- éœ€è¦è®¾ç½®è®¢é˜…æ—¶é•¿
- é€‚åˆï¼šé•¿æœŸè®¢é˜…

**2 - è®¢é˜…ï¼ˆSubscribeï¼‰**
- å‘¨æœŸæ€§ä»˜è´¹
- æŒ‰æ—¶é•¿è®¡è´¹
- éœ€è¦è®¾ç½®è®¢é˜…æ—¶é•¿
- é€‚åˆï¼šæŒç»­æ›´æ–°çš„ä¸“æ 
- é»˜è®¤é€‰é¡¹

#### ä»·æ ¼ (`fee`)
- SUI ä»£å¸
- æ”¯æŒæœ€å¤š9ä½å°æ•°
- ç¤ºä¾‹ï¼š0.5 SUI

#### è®¢é˜…æ—¶é•¿ (`subscription_time`)
- ä»…åœ¨è´¨æŠ¼æˆ–è®¢é˜…æ¨¡å¼ä¸‹æ˜¾ç¤º
- å•ä½ï¼šå¤©
- é»˜è®¤ï¼š30å¤©
- ç¤ºä¾‹ï¼š30ï¼ˆä¸€ä¸ªæœˆï¼‰ã€90ï¼ˆä¸‰ä¸ªæœˆï¼‰

## ğŸ¨ UI è®¾è®¡

### å¸ƒå±€ç»“æ„

```
Header
  â†“
æ ‡é¢˜å’Œæè¿°
  â†“
åŸºæœ¬ä¿¡æ¯å¡ç‰‡
  - ä¸“æ åç§°
  - ä¸“æ æè¿°
  - å°é¢å›¾ç‰‡åœ°å€
  - è®¡åˆ’å‘å¸ƒæœŸæ•° | æ˜¯å¦æ”¯æŒæ‰“åˆ†
  â†“
æ›´æ–°æ–¹å¼å¡ç‰‡ (UpdateMethod Badge)
  - æç¤ºè¯´æ˜æ¡†
  - å¼€å§‹æ—¶é—´
  - æ›´æ–°é—´éš” | æ¯æ¬¡æ›´æ–°æœŸæ•°
  â†“
æ”¯ä»˜æ–¹å¼å¡ç‰‡ (PaymentMethod Badge)
  - æ”¯ä»˜ç±»å‹é€‰æ‹©
  - ä»·æ ¼ | è®¢é˜…æ—¶é•¿ï¼ˆæ¡ä»¶æ˜¾ç¤ºï¼‰
  - å®šä»·å»ºè®®æ¡†
  â†“
æäº¤æŒ‰é’®åŒº
  - å–æ¶ˆæŒ‰é’® | åˆ›å»ºä¸“æ æŒ‰é’®
  â†“
åˆ›ä½œå»ºè®®å¡ç‰‡
```

### ä¸»é¢˜è‰²åº”ç”¨

- ä¸»è‰²ï¼ˆTealï¼‰ï¼šæŒ‰é’®ä¸»è‰²
- ä¿¡æ¯æç¤ºï¼šè“è‰²èƒŒæ™¯
- å»ºè®®æç¤ºï¼šç¥ç€è‰²èƒŒæ™¯
- å¾½ç« ï¼šæ¬¡è¦è‰²

### å“åº”å¼è®¾è®¡

- ç§»åŠ¨ç«¯ï¼šå•åˆ—å¸ƒå±€
- æ¡Œé¢ç«¯ï¼šéƒ¨åˆ†å­—æ®µåŒåˆ—å¸ƒå±€ï¼ˆå¦‚æœŸæ•°å’Œæ‰“åˆ†ã€é—´éš”å’ŒæœŸæ•°ç­‰ï¼‰

## ğŸ“‹ è¡¨å•éªŒè¯

### å¿…å¡«å­—æ®µéªŒè¯
```typescript
- name (ä¸“æ åç§°)
- desc (ä¸“æ æè¿°)
- cover_img_url (å°é¢å›¾ç‰‡)
- plan_installment_number (è®¡åˆ’æœŸæ•°)
- update_since (å¼€å§‹æ—¶é—´)
- update_day_number (æ›´æ–°é—´éš”)
- update_installment_number (æ¯æ¬¡æ›´æ–°æœŸæ•°)
- fee (ä»·æ ¼)
```

### éªŒè¯è§„åˆ™
- æ‰€æœ‰å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º
- æ•°å­—å­—æ®µå¿…é¡»å¤§äº0
- URL å­—æ®µå¿…é¡»æ˜¯æœ‰æ•ˆçš„ URL æ ¼å¼
- æ—¶é—´æˆ³å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ¯«ç§’æ—¶é—´æˆ³

### é”™è¯¯æç¤º
```typescript
toast({
  title: "è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹",
  description: "è¯·å®Œæ•´å¡«å†™è¡¨å•åå†æäº¤",
  variant: "destructive",
})
```

## ğŸ”§ è¡¨å•çŠ¶æ€ç®¡ç†

### çŠ¶æ€å®šä¹‰
```typescript
const [formData, setFormData] = useState({
  // åŸºæœ¬ä¿¡æ¯
  name: "",
  desc: "",
  cover_img_url: "",
  plan_installment_number: "",
  is_rated: false,
  
  // æ›´æ–°æ–¹å¼ UpdateMethod
  update_since: "",
  update_day_number: "",
  update_installment_number: "",
  
  // æ”¯ä»˜æ–¹å¼ PaymentMethod
  pay_type: "2", // é»˜è®¤è®¢é˜…æ¨¡å¼
  fee: "",
  subscription_time: "30", // é»˜è®¤30å¤©
})
```

### åŠ è½½çŠ¶æ€
```typescript
const [isCreating, setIsCreating] = useState(false)
```

## ğŸŒ å›½é™…åŒ–æ”¯æŒ

### æ”¯æŒè¯­è¨€
- ä¸­æ–‡
- è‹±æ–‡

### å›½é™…åŒ–å†…å®¹
- æ‰€æœ‰æ ‡ç­¾å’Œæç¤ºæ–‡æœ¬
- å ä½ç¬¦æ–‡æœ¬
- é”™è¯¯æ¶ˆæ¯
- æŒ‰é’®æ–‡æœ¬
- å¸®åŠ©ä¿¡æ¯

## ğŸ’¡ ç”¨æˆ·æç¤º

### ä¿¡æ¯æç¤ºæ¡†ï¼ˆè“è‰²ï¼‰
ä½ç½®ï¼šæ›´æ–°æ–¹å¼å¡ç‰‡å†…
å†…å®¹ï¼šè§£é‡Šæ›´æ–°è§„åˆ™çš„å·¥ä½œåŸç†

```
æ›´æ–°è§„åˆ™ï¼šä»å¼€å§‹æ—¶é—´èµ·ï¼Œæ¯éš”æŒ‡å®šå¤©æ•°æ›´æ–°æŒ‡å®šæœŸæ•°ã€‚
ä¾‹å¦‚ï¼šä»2024å¹´1æœˆ1æ—¥èµ·ï¼Œæ¯7å¤©æ›´æ–°1æœŸã€‚
```

### å®šä»·å»ºè®®æ¡†ï¼ˆç¥ç€è‰²ï¼‰
ä½ç½®ï¼šæ”¯ä»˜æ–¹å¼å¡ç‰‡å†…
å†…å®¹ï¼š
- ä¹°æ–­æ¨¡å¼è¯´æ˜
- è´¨æŠ¼æ¨¡å¼è¯´æ˜
- è®¢é˜…æ¨¡å¼è¯´æ˜

### åˆ›ä½œå»ºè®®å¡ç‰‡
ä½ç½®ï¼šè¡¨å•åº•éƒ¨
å†…å®¹ï¼š5æ¡åˆ›ä½œå»ºè®®

## ğŸ”„ æäº¤æµç¨‹

### 1. è¡¨å•éªŒè¯
```typescript
if (!formData.name || !formData.desc || ... ) {
  // æ˜¾ç¤ºé”™è¯¯æç¤º
  return
}
```

### 2. è®¾ç½®åŠ è½½çŠ¶æ€
```typescript
setIsCreating(true)
```

### 3. è°ƒç”¨åŒºå—é“¾ï¼ˆTODOï¼‰
```typescript
// éœ€è¦å®ç°ï¼š
// - åˆ›å»º UpdateMethod å¯¹è±¡
// - åˆ›å»º PaymentMethod å¯¹è±¡
// - åˆ›å»º Column å¯¹è±¡
// - å…³è”æ‰€æœ‰å¯¹è±¡
```

### 4. æˆåŠŸåé¦ˆ
```typescript
toast({
  title: "ä¸“æ åˆ›å»ºæˆåŠŸï¼",
  description: "ä½ çš„ä¸“æ å·²ç»åˆ›å»ºï¼Œå¯ä»¥å¼€å§‹åˆ›ä½œäº†",
})
router.push("/my-columns")
```

### 5. é”™è¯¯å¤„ç†
```typescript
catch (error) {
  toast({
    title: "åˆ›å»ºå¤±è´¥",
    description: "åˆ›å»ºä¸“æ æ—¶å‡ºé”™ï¼Œè¯·é‡è¯•",
    variant: "destructive",
  })
}
```

## ğŸ“Š æ•°æ®æ˜ å°„

### å‰ç«¯è¡¨å• â†’ åˆçº¦æ•°æ®

#### Column
```typescript
{
  name: formData.name,
  desc: formData.desc,
  cover_img_url: formData.cover_img_url,
  plan_installment_number: parseInt(formData.plan_installment_number),
  is_rated: formData.is_rated,
  status: 0, // æœªå‘å¸ƒ
}
```

#### UpdateMethod
```typescript
{
  since: parseInt(formData.update_since),
  day_number: parseInt(formData.update_day_number),
  installment_number: parseInt(formData.update_installment_number),
}
```

#### PaymentMethod
```typescript
{
  pay_type: parseInt(formData.pay_type),
  coin_type: "0x2::sui::SUI",
  decimals: 9,
  fee: parseFloat(formData.fee) * 1000000000, // è½¬æ¢ä¸ºæœ€å°å•ä½
  subscription_time: parseInt(formData.subscription_time),
}
```

## ğŸ¯ å¾…å®ç°åŠŸèƒ½

### åŒºå—é“¾é›†æˆ
- [ ] å®ç°åˆçº¦è°ƒç”¨é€»è¾‘
- [ ] åˆ›å»º UpdateMethod äº¤æ˜“
- [ ] åˆ›å»º PaymentMethod äº¤æ˜“
- [ ] åˆ›å»º Column äº¤æ˜“
- [ ] é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### å¢å¼ºåŠŸèƒ½
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- [ ] é¢„è§ˆåŠŸèƒ½
- [ ] è‰ç¨¿ä¿å­˜
- [ ] è¡¨å•è‡ªåŠ¨ä¿å­˜
- [ ] æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼ˆæ›¿ä»£æ—¶é—´æˆ³è¾“å…¥ï¼‰

## âœ… å·²å®ŒæˆåŠŸèƒ½

- [x] å®Œæ•´çš„è¡¨å•ç»“æ„
- [x] æ‰€æœ‰å¿…éœ€å­—æ®µ
- [x] è¡¨å•éªŒè¯
- [x] åŠ è½½çŠ¶æ€
- [x] é”™è¯¯æç¤º
- [x] æˆåŠŸåé¦ˆ
- [x] å›½é™…åŒ–æ”¯æŒ
- [x] å“åº”å¼è®¾è®¡
- [x] ä¸»é¢˜è‰²åº”ç”¨
- [x] ç”¨æˆ·æç¤ºå’Œå¸®åŠ©ä¿¡æ¯
- [x] æ¡ä»¶å­—æ®µæ˜¾ç¤ºï¼ˆè®¢é˜…æ—¶é•¿ï¼‰

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºä¸€ä¸ªæ¯å‘¨æ›´æ–°çš„è®¢é˜…ä¸“æ 

```
åŸºæœ¬ä¿¡æ¯ï¼š
- åç§°ï¼šWeb3 å¼€å‘å‘¨åˆŠ
- æè¿°ï¼šæ¯å‘¨åˆ†äº« Web3 å¼€å‘æœ€æ–°æŠ€æœ¯å’Œæ¡ˆä¾‹
- å°é¢ï¼šhttps://example.com/web3-weekly.jpg
- è®¡åˆ’æœŸæ•°ï¼š52
- æ”¯æŒæ‰“åˆ†ï¼šæ˜¯

æ›´æ–°æ–¹å¼ï¼š
- å¼€å§‹æ—¶é—´ï¼š1704067200000 (2024-01-01)
- æ›´æ–°é—´éš”ï¼š7 å¤©
- æ¯æ¬¡æœŸæ•°ï¼š1 æœŸ

æ”¯ä»˜æ–¹å¼ï¼š
- ç±»å‹ï¼šè®¢é˜…
- ä»·æ ¼ï¼š0.5 SUI
- è®¢é˜…æ—¶é•¿ï¼š30 å¤©
```

## ğŸ”— ç›¸å…³æ–‡ä»¶

- é¡µé¢è·¯å¾„ï¼š`/my-columns/create`
- ç»„ä»¶æ–‡ä»¶ï¼š`app/my-columns/create/page.tsx`
- åˆçº¦å®šä¹‰ï¼š`coral/move/sources/coral_market.move`
- æ•°æ®ç±»å‹ï¼š`shared/data.ts`

## ğŸ‰ æ€»ç»“

åˆ›å»ºä¸“æ é¡µé¢å·²å®Œå…¨å®ç°ï¼ŒåŒ…å«æ‰€æœ‰åˆçº¦è¦æ±‚çš„å­—æ®µå’ŒåŠŸèƒ½ï¼š
- âœ… åŸºæœ¬ä¿¡æ¯ï¼ˆ6ä¸ªå­—æ®µï¼‰
- âœ… æ›´æ–°æ–¹å¼ UpdateMethodï¼ˆ3ä¸ªå­—æ®µï¼‰
- âœ… æ”¯ä»˜æ–¹å¼ PaymentMethodï¼ˆ3ä¸ªå­—æ®µï¼‰
- âœ… å®Œæ•´çš„è¡¨å•éªŒè¯å’Œç”¨æˆ·åé¦ˆ
- âœ… å›½é™…åŒ–å’Œå“åº”å¼è®¾è®¡
- âœ… ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ

ä¸‹ä¸€æ­¥éœ€è¦å®ç°åŒºå—é“¾äº¤äº’é€»è¾‘ï¼Œå°†è¡¨å•æ•°æ®æäº¤åˆ° Sui åŒºå—é“¾ï¼ğŸš€

